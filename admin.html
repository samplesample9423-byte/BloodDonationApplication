<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Manage Donors</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="logo">
            <i class="fas fa-heartbeat"></i> BloodLink
        </div>
        <ul class="nav-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="search.html">Find Donor</a></li>
            <li><a href="register.html">Register</a></li>
            <li><a href="admin.html" class="active">Admin</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li><button id="theme-toggle"><i class="fas fa-moon"></i></button></li>
        </ul>
        <div class="hamburger">
            <i class="fas fa-bars"></i>
        </div>
    </nav>

    <div class="container">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
            <h2>Admin Dashboard</h2>
            <button onclick="logout()" class="btn btn-secondary" style="border: 1px solid var(--primary-color);">Logout</button>
        </div>

        <div class="features" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 3rem;">
            <div class="feature-card" style="text-align: center; padding: 1.5rem;">
                <i class="fas fa-users" style="font-size: 2.5rem; color: var(--primary-color); margin-bottom: 1rem;"></i>
                <h3 id="total-donors">0</h3>
                <p>Total Donors</p>
            </div>
            <div class="feature-card" style="text-align: center; padding: 1.5rem;">
                <i class="fas fa-hand-holding-heart" style="font-size: 2.5rem; color: var(--primary-color); margin-bottom: 1rem;"></i>
                <h3 id="total-requests">0</h3>
                <p>Active Requests</p>
            </div>
            <div class="feature-card" style="text-align: center; padding: 1.5rem;">
                <i class="fas fa-tint" style="font-size: 2.5rem; color: var(--primary-color); margin-bottom: 1rem;"></i>
                <h3 id="most-needed">N/A</h3>
                <p>Most Needed Group</p>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 3rem;">
            <div style="background: var(--card-bg); padding: 2rem; border-radius: 10px; box-shadow: var(--shadow);">
                <h3 style="text-align: center; margin-bottom: 1.5rem;">Donor Blood Group Distribution</h3>
                <div style="max-width: 100%; margin: 0 auto;">
                    <canvas id="bloodGroupChart"></canvas>
                </div>
            </div>

            <div style="background: var(--card-bg); padding: 2rem; border-radius: 10px; box-shadow: var(--shadow);">
                <h3 style="text-align: center; margin-bottom: 1.5rem;">Blood Requests Overview</h3>
                <div style="max-width: 100%; margin: 0 auto;">
                    <canvas id="requestsChart"></canvas>
                </div>
            </div>

            <div style="background: var(--card-bg); padding: 2rem; border-radius: 10px; box-shadow: var(--shadow); height: 100%; grid-column: 1 / -1;">
                <h3 style="margin-bottom: 1.5rem;">Recent Activity</h3>
                <ul id="activity-log" style="list-style: none; padding: 0; max-height: 300px; overflow-y: auto;">
                    <!-- Activities will be injected here -->
                    <li style="color: var(--text-color); opacity: 0.7; font-style: italic;">Loading activities...</li>
                </ul>
            </div>
        </div>

        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
            <h3>Manage Donors</h3>
            <div>
                <button onclick="exportDonorsToCSV()" class="btn btn-primary" style="padding: 0.5rem 1rem; font-size: 0.9rem; margin-right: 0.5rem;">
                    <i class="fas fa-file-csv"></i> CSV
                </button>
                <button onclick="exportDonorsToPDF()" class="btn btn-primary" style="padding: 0.5rem 1rem; font-size: 0.9rem; background-color: #dc3545; border-color: #dc3545;">
                    <i class="fas fa-file-pdf"></i> PDF
                </button>
            </div>
        </div>
        <div class="table-container">
            <table id="donors-table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Age</th>
                        <th>Gender</th>
                        <th>Blood Group</th>
                        <th>City</th>
                        <th>Phone</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Donor rows will be injected here -->
                </tbody>
            </table>
        </div>
        <p id="no-donors-msg" style="text-align: center; margin-top: 1rem; display: none;">No donors registered yet.</p>

        <h3 style="margin-top: 3rem;">Manage Requests</h3>
        <div class="table-container">
            <table id="requests-table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Blood Group</th>
                        <th>Units</th>
                        <th>City</th>
                        <th>Phone</th>
                        <th>Date</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Request rows will be injected here -->
                </tbody>
            </table>
        </div>
        <p id="no-requests-msg" style="text-align: center; margin-top: 1rem; display: none;">No active requests.</p>

        <h3 style="margin-top: 3rem;">Manage Admins</h3>
        <div class="table-container">
            <table id="admins-table">
                <thead>
                    <tr>
                        <th>Username</th>
                        <th>ID</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Admin rows will be injected here -->
                </tbody>
            </table>
        </div>
        <p id="no-admins-msg" style="text-align: center; margin-top: 1rem; display: none;">No other admins.</p>
    </div>

    <footer>
        <p>&copy; 2024 Blood Donation Management System. All rights reserved.</p>
    </footer>

    <script src="script.js"></script>
</body>
</html>
